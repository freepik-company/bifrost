# This file contains the configuration for the Bifrost service.
# The whole file supports environment variables expansion,
# so you can use them in any part of the file

# (Required) Listener which will attend incoming requests
listener:
  port: 7777
  host: 0.0.0.0

  options:
    readTimeout: 10s
    writeTimeout: 10s

# (Optional) Authentication configuration
authentication:
  type: none

  # TBD: Add support for other authentication types
  # next types will be implemented in the future

  # Basic authentication params
  #type: basic
  #basic:
  #  username: "admin"
  #  password: "admin"

  # Bearer authentication params
  #type: bearer
  #bearer:
  #  headerName: authorization
  #  allowedTokens:
  #    - asdf1234xxxx
  #    - 1234asdfyyyy

# (Optional) List of modifiers to apply to the request before signing it
modifiers:
  - type: path
    path:
      pattern: ^(/[a-zA-Z0-9\-_]/)
      replace: ""

  - type: signature
    signature:
      type: s3
      version: v4 # v2, v4

# (Required) Target where the request will be forwarded
target:
  host: s3.gra.io.cloud.ovh.net
  port: 443

  scheme: https
  tls:
    skipVerify: true

  options:
    dialTimeout: 10s
    keepAlive: 30s
